<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">

    {% block stylesheets %}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    {% endblock %}

    {% block javascripts %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    {% endblock %}
</head>

<body>
    {% block body %}
        <div class="container mx-auto">
            {% if not agent %}
                <div class="vh-100 align-content-center">
                    {% form_theme registerAgentForm 'bootstrap_5_layout.html.twig' %}
                    {{ form(registerAgentForm) }}
                </div>
            {% else %}
                <div class="my-5">
                    <strong>Welcome back {{ agent.symbol }}</strong><br><br>

                    <span>Available credits: {{ agent.credits }}</span><br>
                    <span>Available ships: {{ agent.shipCount }}</span><br><br>

                    <strong>Your contracts</strong><br><br>

                    {% for contract in contracts %}
                        <span>Type: {{ contract.type }}</span><br>
                        <span>Reward: {{ contract.terms['payment']['onAccepted'] }} credits immediately, {{ contract.terms['payment']['onFulfilled'] }} credits on fulfillment</span><br>
                        <span>Expires on: {{ contract.expiration|date('d.m.Y H:i:s') }}</span><br>
                        {% if contract.accepted %}
                            <strong>Contract is underway</strong>
                        {% else %}
                            <a href="{{ path('app.contract.accept', {'contract': contract.id}) }}">Accept contract</a>
                        {% endif %}
                        <br><br>
                        <a href="{{ path('app.logout') }}">Terminate agent</a>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    {% endblock %}
</body>
</html>
